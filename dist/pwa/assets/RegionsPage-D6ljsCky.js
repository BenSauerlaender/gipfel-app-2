import{Q as p}from"./QCardSection-D2rU2rIR.js";import{Q}from"./QSeparator-DMphVgNg.js";import{$ as x,r as f,b as h,D as y,a4 as S,U as s,S as t,ac as w,R as P,a0 as c,W as d,X as n,V}from"./index-5JU3hUNh.js";import{Q as k}from"./QInput-zAR2BCvy.js";import{Q as C,a as _,b as D}from"./QTable-C9JcGk-G.js";import{Q as I}from"./QCard-D5p2QOJz.js";import{a as T}from"./dataStore-MVK1ou4N.js";import"./use-key-composition-BpG4ECq4.js";import"./focus-manager-BJWzFvJg.js";import"./private.use-form-BTD59pEF.js";import"./QSelect-BMfa-fUZ.js";import"./use-checkbox-6Z74Bsys.js";import"./format-DSQSTmky.js";import"./QLinearProgress-C49934-l.js";import"./resourceStore-CeHnm00e.js";const B={class:"q-pa-md page-container"},R={class:"text-grey-6"},A={__name:"RegionsPage",setup(G){const l=T(),i=f(null),m=f(""),g=[{name:"name",label:"Gebiet",field:"name",align:"left",sortable:!0},{name:"summits",label:"Gipfel",field:"summits",align:"left",sortable:!0},{name:"ascents",label:"Begehungen",field:a=>a.ascents>0?a.ascents:"-",align:"left",sortable:!0}],b=h(()=>l.regions.map(a=>{const u=l.summits.filter(r=>r.regionID===a._id).map(r=>r._id).filter(r=>l.f_AscentsPerSummit[r]>0).length,e=a.summitCount,v=e==0?0:(u/e*100).toFixed(1);return{...a,summits:e,ascents:l.f_AscentsPerRegion[a._id]??"-",summitPercentage:v}}));return y(()=>{i.value.sort("ascents"),i.value.sort("ascents")}),(a,o)=>{const u=w("router-link");return P(),S("div",B,[s(I,null,{default:t(()=>[s(p,null,{default:t(()=>o[1]||(o[1]=[c("div",{class:"text-h2 text-weight-regular"},"Gebiete",-1)])),_:1,__:[1]}),s(Q),s(p,null,{default:t(()=>[s(C,{ref_key:"regionsTable",ref:i,rows:b.value,columns:g,"row-key":"_id","virtual-scroll":"",flat:"",filter:m.value,"binary-state-sort":"","rows-per-page-options":[0]},{"top-right":t(()=>[s(k,{borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=e=>m.value=e),placeholder:"Search"},{append:t(()=>[s(V,{name:"search"})]),_:1},8,["modelValue"])]),"header-cell-summits":t(e=>[s(D,{props:e},{default:t(()=>[d(n(e.col.label)+" ",1),o[2]||(o[2]=c("span",{class:"text-grey-6"},"(% begangen)",-1))]),_:2,__:[2]},1032,["props"])]),"body-cell-summits":t(e=>[s(_,{props:e},{default:t(()=>[d(n(e.value)+" ",1),c("span",R,"("+n(e.row.summitPercentage)+"%)",1)]),_:2},1032,["props"])]),"body-cell-name":t(e=>[s(_,{props:e},{default:t(()=>[s(u,{style:{"text-decoration":"none",color:"inherit"},to:`/regions/${e.row._id}`},{default:t(()=>[d(n(e.value),1)]),_:2},1032,["to"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),_:1})]),_:1})])}}},O=x(A,[["__scopeId","data-v-ec548a22"]]);export{O as default};
