import{aU as a}from"./index-DaOUFlu6.js";import{u}from"./resourceStore-C9NU4mOX.js";const o=a("filter",{state:()=>({filters:{ascents:{allowedTypes:["lead","solo","topRope","aborted"],dateMin:null,dateMax:null},climbers:{selected:[],mode:"or",lead:null},route:{region:null,summit:null,route:null,tags:{star:null,unsecure:null}},grade:{normal:{min:null,max:null},jump:{min:null,max:null}}},applyFilter:!0}),getters:{},actions:{}}),g=s=>s.difficulty.jump?s.difficulty.jump:s.difficulty.normal?s.difficulty.normal:void 0,b=s=>d[s],n=["1","2","3","4","5"],f=["I","II","III","IV","V","VI","VIIa","VIIb","VIIc","VIIIa","VIIIb","VIIIc","IXa","IXb","IXc","Xa","Xb","Xc","XIa","XIb","XIc","XIIa","XIIb","XIIc"],d={I:"#aad576",II:"#73a942",III:"#538d22",IV:"#245501",V:"#faa307",VI:"#f48c06",VIIa:"#e85d04",VIIb:"#e85d04",VIIc:"#e85d04",VIIIa:"#dc2f02",VIIIb:"#dc2f02",VIIIc:"#dc2f02",IXa:"#d00000",IXb:"#d00000",IXc:"#d00000",Xa:"#9d0208",Xb:"#9d0208",Xc:"#9d0208",XIa:"#6a040f",XIb:"#6a040f",XIc:"#6a040f",XIIa:"#370617",XIIb:"#370617",XIIc:"#370617",1:"#aad576",2:"#538d22",3:"#faa307",4:"#e85d04",5:"#9d0208"},c=(s,e)=>{let r=0,t=0;return s.difficulty.jump?r=n.indexOf(s.difficulty.jump):s.difficulty.normal&&(r=f.indexOf(s.difficulty.normal)+n.length),e.difficulty.jump?t=n.indexOf(e.difficulty.jump):e.difficulty.normal&&(t=f.indexOf(e.difficulty.normal)+n.length),r-t},p=(s,e,r,t)=>c(r,t),y=a("data",{state:()=>({}),getters:{ascents(s){return u().getResourceById("ascents").data||[]},climbers(s){return u().getResourceById("climbers").data||[]},routes(s){return u().getResourceById("routes").data||{}},summits(s){return u().getResourceById("summits").data||[]},regions(s){return u().getResourceById("regions").data||[]},trips(s){return u().getResourceById("trips").data||[]},f_AscentsPerRegion(s){const e={};return s.f_Ascents.forEach(r=>{const t=r.route.regionID;e[t]||(e[t]=0),e[t]++}),e},f_AscentsPerSummit(s){const e={};return s.f_Ascents.forEach(r=>{const t=r.route.summitID;e[t]||(e[t]=0),e[t]++}),e},f_AscentsPerRoute(s){const e={};return s.f_Ascents.forEach(r=>{const t=r.route._id;e[t]||(e[t]=0),e[t]++}),e},f_Ascents(s){const e=o();return e.applyFilter?s.ascents.filter(r=>!(!e.filters.ascents.allowedTypes.includes("aborted")&&r.isAborted||!e.filters.ascents.allowedTypes.includes("solo")&&r.isSolo||!e.filters.ascents.allowedTypes.includes("topRope")&&r.isTopRope||!e.filters.ascents.allowedTypes.includes("lead")&&r.leadClimber)).filter(r=>{const t=new Date(r.date.split("T")[0]);return!(e.filters.ascents.dateMin&&t<e.filters.ascents.dateMin||e.filters.ascents.dateMax&&t>e.filters.ascents.dateMax)}).filter(r=>{const t=l=>e.filters.ascents.allowedTypes.includes("aborted")||l.isAborted===!1;return e.filters.climbers.selected.length==0?!0:!(e.filters.climbers.mode==="or"&&!e.filters.climbers.selected.some(l=>r.climbers.filter(t).some(i=>i._id===l))||e.filters.climbers.mode==="and"&&!e.filters.climbers.selected.every(l=>r.climbers.filter(t).some(i=>i._id===l))||e.filters.climbers.mode==="exact"&&(!e.filters.climbers.selected.every(l=>r.climbers.filter(t).some(i=>i._id===l))||r.climbers.length!==e.filters.climbers.selected.length)||e.filters.climbers.mode==="not"&&e.filters.climbers.selected.some(l=>r.climbers.filter(t).some(i=>i._id===l)))}).filter(r=>r.leadClimber===null?!0:!(e.filters.climbers.lead!==null&&r.leadClimber._id!==e.filters.climbers.lead)).filter(r=>e.filters.route.route!==null?r.route._id===e.filters.route.route:e.filters.route.summit!==null?r.route.summitID===e.filters.route.summit:e.filters.route.region!==null?r.route.regionID===e.filters.route.region:!0).filter(r=>{const t=f.indexOf(r.route.difficulty.normal);return t===-1?!0:!(e.filters.grade.normal.min!==null&&t<e.filters.grade.normal.min||e.filters.grade.normal.max!==null&&t>e.filters.grade.normal.max)}).filter(r=>e.filters.route.tags.star===null?!0:!(e.filters.route.tags.star==="none"&&r.route.stars!==0||e.filters.route.tags.star==="one"&&r.route.stars!==1||e.filters.route.tags.star==="two"&&r.route.stars!==2||e.filters.route.tags.star==="oneOrTwo"&&r.route.stars===0)).filter(r=>e.filters.route.tags.unsecure===null?!0:!(e.filters.route.tags.unsecure==="false"&&r.route.unsecure===!0||e.filters.route.tags.unsecure==="true"&&r.route.unsecure===!1)):s.ascents},f_PopulatedTrips(s){return s.trips.map(e=>({...e,days:e.days.map(r=>({...r,ascents:r.ascents.map(t=>s.f_Ascents.find(l=>l._id===t)).filter(t=>t!==void 0)})).filter(r=>r.ascents.length>0)})).filter(e=>e.days.length>0)}},actions:{}});export{f as N,y as a,b,g,p as s,o as u};
