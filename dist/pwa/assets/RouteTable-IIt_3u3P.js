import{$ as k,r as b,b as h,D as w,ac as T,Q as u,R as o,S as t,U as a,a4 as _,ar as p,W as d,X as i,a0 as x,V as Q,a2 as $}from"./index-DBxbZvz7.js";import{Q as I}from"./QInput-BoOleBib.js";import{a as s,b as V,Q as B}from"./QTable-BhB04J5h.js";import{a as R,s as D,g as G}from"./dataStore-Ck_UMcSQ.js";import{_ as N,a as A,b as C}from"./RouteGradeChip-BU5iv_2_.js";import{_ as M}from"./RouteTTScoreChip-CNY8HPVT.js";const U={key:1},W={key:1},q={key:1},E={__name:"RouteTable",props:{routes:{type:Array,required:!0},columns:{type:Array,default:()=>["name","summit","region","grade","stars","unsecure","ascents","ttScore"]},defaultSort:{type:Array,default:()=>["ascents","desc"]}},setup(g){const n=g,c=b(null),y=R(),m=b(""),v=[{name:"name",label:"Weg",field:"name",align:"left",sortable:!0},{name:"summit",label:"Gipfel",field:r=>r.summitName,align:"left",sortable:!0},{name:"region",label:"Gebiet",field:r=>r.regionName,align:"left",sortable:!0},{name:"grade",label:"Grad",field:r=>G(r)??"-",align:"center",sortable:!0,sort:D},{name:"stars",label:"Sterne",field:r=>r.stars,align:"center",sortable:!0},{name:"unsecure",label:"!",field:r=>r.unsecure,align:"left",sortable:!0},{name:"ascents",label:"Begehungen",field:"ascents",align:"left",sortable:!0},{name:"ttScore",label:"TT Bewertung",field:"teufelsturmScore",align:"center",sortable:!0}].filter(r=>n.columns.includes(r.name)),S=h(()=>n.routes.map(l=>({...l,ascents:y.f_AscentsPerRoute[l._id]??"-"})));return w(()=>{c.value.sort(n.defaultSort[0]),n.defaultSort[1]=="desc"&&c.value.sort(n.defaultSort[0])}),(r,l)=>{const f=T("router-link");return o(),u(B,{rows:S.value,columns:$(v),"row-key":"_id",style:{height:"800px"},"virtual-scroll":"","rows-per-page-options":[0],"binary-state-sort":"",flat:"",filter:m.value,ref_key:"routesTable",ref:c},{"top-right":t(()=>[a(I,{borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),placeholder:"Search"},{append:t(()=>[a(Q,{name:"search"})]),_:1},8,["modelValue"])]),"header-cell-routes":t(e=>[a(V,{props:e},{default:t(()=>[d(i(e.col.label)+" ",1),l[3]||(l[3]=x("span",{class:"text-grey-6"},"(% begangen)",-1))]),_:2,__:[3]},1032,["props"])]),"body-cell-summit":t(e=>[a(s,{props:e},{default:t(()=>[a(f,{style:{"text-decoration":"none",color:"inherit"},to:`/summits/${e.row.summitID}`},{default:t(()=>[d(i(e.value),1)]),_:2},1032,["to"])]),_:2},1032,["props"])]),"body-cell-region":t(e=>[a(s,{props:e},{default:t(()=>[a(f,{style:{"text-decoration":"none",color:"inherit"},to:`/regions/${e.row.regionID}`},{default:t(()=>[d(i(e.value),1)]),_:2},1032,["to"])]),_:2},1032,["props"])]),"body-cell-name":t(e=>[a(s,{props:e},{default:t(()=>[a(f,{style:{"text-decoration":"none",color:"inherit"},to:`/routes/${e.row._id}`},{default:t(()=>[d(i(e.value),1)]),_:2},1032,["to"])]),_:2},1032,["props"])]),"body-cell-grade":t(e=>[a(s,{props:e},{default:t(()=>[p([e.value],()=>a(C,{grade:e.value},null,8,["grade"]),l,1)]),_:2},1032,["props"])]),"body-cell-stars":t(e=>[a(s,{props:e},{default:t(()=>[e.value>0?p([e.value],()=>(o(),u(A,{key:0,stars:e.value},null,8,["stars"])),l,2):(o(),_("span",U,"-"))]),_:2},1032,["props"])]),"body-cell-unsecure":t(e=>[a(s,{props:e},{default:t(()=>[e.value?(o(),u(N,{key:0})):(o(),_("span",W,"-"))]),_:2},1032,["props"])]),"body-cell-ttScore":t(e=>[a(s,{props:e},{default:t(()=>[e.value?(o(),u(M,{key:0,score:e.value,ttrouteid:e.row.teufelsturmId},null,8,["score","ttrouteid"])):(o(),_("span",q,"-"))]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])}}},J=k(E,[["__scopeId","data-v-1d51afb8"]]);export{J as R};
