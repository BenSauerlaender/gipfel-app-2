import{$ as h,r as f,b as v,D as x,ac as w,Q,R as T,S as t,U as s,W as u,X as l,a0 as p,V,a2 as k}from"./index-DBxbZvz7.js";import{Q as A}from"./QInput-BoOleBib.js";import{a as m,b as C,Q as B}from"./QTable-BhB04J5h.js";import{a as D}from"./dataStore-Ck_UMcSQ.js";const I={class:"text-grey-6"},N={__name:"SummitTable",props:{summits:{type:Array,required:!0},columns:{type:Array,default:()=>["name","region","routes","ascents"]},defaultSort:{type:Array,default:()=>["ascents","desc"]}},setup(_){const r=_,i=f(null),c=D(),d=f(""),b=[{name:"name",label:"Gipfel",field:o=>o.name,align:"left",sortable:!0},{name:"region",label:"Gebiet",field:o=>o.regionName,align:"left",sortable:!0},{name:"routes",label:"Wege",field:o=>o.routeCount,align:"left",sortable:!0},{name:"ascents",label:"Begehungen",field:"ascents",align:"left",sortable:!0}].filter(o=>r.columns.includes(o.name)),g=v(()=>r.summits.map(a=>{const n=c.routes[a._id].filter(S=>c.f_AscentsPerRoute[S._id]>0).length,e=a.routeCount,y=e==0?0:(n/e*100).toFixed(1);return{...a,routePercentage:y,ascents:c.f_AscentsPerSummit[a._id]??"-"}}));return x(()=>{i.value.sort(r.defaultSort[0]),r.defaultSort[1]=="desc"&&i.value.sort(r.defaultSort[0])}),(o,a)=>{const n=w("router-link");return T(),Q(B,{rows:g.value,columns:k(b),"row-key":"_id",style:{height:"800px"},"virtual-scroll":"","rows-per-page-options":[0],"binary-state-sort":"",flat:"",filter:d.value,ref_key:"summitsTable",ref:i},{"top-right":t(()=>[s(A,{borderless:"",dense:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),placeholder:"Search"},{append:t(()=>[s(V,{name:"search"})]),_:1},8,["modelValue"])]),"header-cell-routes":t(e=>[s(C,{props:e},{default:t(()=>[u(l(e.col.label)+" ",1),a[1]||(a[1]=p("span",{class:"text-grey-6"},"(% begangen)",-1))]),_:2,__:[1]},1032,["props"])]),"body-cell-routes":t(e=>[s(m,{props:e},{default:t(()=>[u(l(e.value)+" ",1),p("span",I,"("+l(e.row.routePercentage)+"%)",1)]),_:2},1032,["props"])]),"body-cell-region":t(e=>[s(m,{props:e},{default:t(()=>[s(n,{style:{"text-decoration":"none",color:"inherit"},to:`/regions/${e.row.regionID}`},{default:t(()=>[u(l(e.value),1)]),_:2},1032,["to"])]),_:2},1032,["props"])]),"body-cell-name":t(e=>[s(m,{props:e},{default:t(()=>[s(n,{style:{"text-decoration":"none",color:"inherit"},to:`/summits/${e.row._id}`},{default:t(()=>[u(l(e.value),1)]),_:2},1032,["to"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])}}},R=h(N,[["__scopeId","data-v-2281f8d2"]]);export{R as S};
