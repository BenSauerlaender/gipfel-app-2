import{Q as U,a as V,b as I,c as R}from"./QTabPanels-_UZwKMvx.js";import{Q as F}from"./QSeparator-BlJwVjEq.js";import{u as K,a as L,Q as z}from"./QCard-BS_7SdRC.js";import{c as N,g as G,b as T,h as l,e as A,J,ah as E,i as O,f as $,j as W,V as k,$ as j,ai as X,ac as H,a4 as s,R as r,U as o,S as d,W as x,X as y,a6 as g,a7 as S,Q as q,aj as C,T as _,a2 as Q,a0 as v,s as M,r as Y}from"./index-D5dlIUyy.js";import{Q as Z}from"./QCardSection-hbXFI8Kn.js";import{g as ee,a as te}from"./dataStore-swpdkdCu.js";import{_ as ie,a as re,b as oe}from"./RouteGradeChip-B9IHD0jX.js";import{A as se}from"./AscentTable-QMCAQxB9.js";import"./use-key-composition-DHurTuA_.js";import"./focus-manager-BJWzFvJg.js";import"./touch-BNURemir.js";import"./format-Den2KV2Y.js";import"./QSelect-DQmXCj9A.js";import"./use-checkbox-CmntGELh.js";import"./private.use-form-tzj63TXQ.js";import"./resourceStore-CLHL65q7.js";import"./QInput-CK6CjM5w.js";import"./QTable-DJtZOFF0.js";import"./QLinearProgress-CG24zA5z.js";const ae=N({name:"QTimeline",props:{...K,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:n}){const m=G(),f=L(e,m.proxy.$q);J(E,e);const u=T(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(f.value===!0?" q-timeline--dark":""));return()=>l("ul",{class:u.value},A(n.default))}}),D=N({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:n}){const m=O(E,$);if(m===$)return console.error("QTimelineEntry needs to be child of QTimeline"),$;const f=T(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),u=T(()=>`q-timeline__dot text-${e.color||m.color}`),c=T(()=>m.layout==="comfortable"&&m.side==="left");return()=>{const i=W(n.default,[]);if(e.body!==void 0&&i.unshift(e.body),e.heading===!0){const p=[l("div"),l("div"),l(e.tag,{class:"q-timeline__heading-title"},i)];return l("div",{class:"q-timeline__heading"},c.value===!0?p.reverse():p)}let a;e.icon!==void 0?a=[l(k,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(a=[l("img",{class:"q-timeline__dot-img",src:e.avatar})]);const b=[l("div",{class:"q-timeline__subtitle"},[l("span",{},A(n.subtitle,[e.subtitle]))]),l("div",{class:u.value},a),l("div",{class:"q-timeline__content"},[l("h6",{class:"q-timeline__title"},A(n.title,[e.title]))].concat(i))];return l("li",{class:f.value},c.value===!0?b.reverse():b)}}}),le={key:0},ne={class:"lead-climber"},ue={key:0},de={key:4,class:"q-ml-xs solo-hint"},me={key:5,class:"q-ml-xs topRope-hint"},ce={key:6,class:"q-ml-xs notes"},_e={key:7},fe={__name:"TimelineTripEntry",props:{trip:{type:Object,required:!0}},setup(e){X(i=>({"93b6019e":c.aborted,"8d2c416e":c.topRope}));const n=e,m=(i,a)=>{const b=n.trip.days[i]?.ascents[a-1]?.route?.summitName;if(b){const p=n.trip.days[i].ascents[a].route?.summitName;return b===p}else return!1},f=i=>new Date(i).toLocaleDateString("de-DE",{year:"numeric",month:"numeric",day:"numeric"}),u=i=>i.leadClimber?i.climbers.filter(a=>a._id!==i.leadClimber._id):i.climbers,c={aborted:"#818181",topRope:"#5a5a5a"};return(i,a)=>{const b=H("router-link");return r(),s(g,null,[o(D,{heading:""},{default:d(()=>[x(y(n.trip.name),1)]),_:1}),(r(!0),s(g,null,S(n.trip.days,(p,w)=>(r(),q(D,{key:p.name,subtitle:f(p.name)},{default:d(()=>[(r(!0),s(g,null,S(p.ascents,(t,P)=>(r(),s("div",{key:t._id,class:C(["row items-center q-ma-sm",(t.isSolo?"solo":"")+(t.isTopRope?"topRope":"")+(t.isAborted?"aborted":"")])},[t.isAborted==!0?(r(),s("span",le,y("("))):_("",!0),o(b,{class:C(["summit text-weight-medium",m(w,P)?"invisible":""]),style:{"text-decoration":"inherit",color:"inherit"},to:`/summits/${t.route.summitID}`},{default:d(()=>[x(y(t.route.summitName),1)]),_:2},1032,["class","to"]),o(k,{name:"chevron_right",color:"grey-7"}),o(b,{class:"route",style:{"text-decoration":"none",color:"inherit"},to:`/routes/${t.route._id}`},{default:d(()=>[x(y(t.route.name),1)]),_:2},1032,["to"]),t.route.unsecure?(r(),q(ie,{key:1,color:t.isAborted?c.aborted:void 0},null,8,["color"])):_("",!0),t.route.stars>0?(r(),q(re,{key:2,stars:t.route.stars,color:t.isAborted?c.aborted:void 0},null,8,["stars","color"])):_("",!0),o(oe,{grade:Q(ee)(t.route),color:t.isAborted?c.aborted:void 0},null,8,["grade","color"]),o(k,{name:"chevron_right",color:"grey-7"}),t.leadClimber?(r(),s(g,{key:3},[v("span",ne,y(t.leadClimber.firstName),1),o(k,{name:"chevron_right",color:"grey-7"})],64)):_("",!0),(r(!0),s(g,null,S(u(t),(h,B)=>(r(),s(g,{key:h._id},[v("span",{class:C(["climber q-ml-xs",h.isAborted?"aborted":""])},y(h.isAborted?"("+h.firstName+")":h.firstName),3),B<u(t).length-1?(r(),s("span",ue,",")):_("",!0)],64))),128)),t.isSolo===!0?(r(),s("span",de,"(solo)")):_("",!0),t.isTopRope===!0?(r(),s("span",me,"(v.o.g.)")):_("",!0),t.notes!=null?(r(),s("span",ce,"("+y(t.notes)+")",1)):_("",!0),t.isAborted==!0?(r(),s("span",_e,y(")"))):_("",!0)],2))),128))]),_:2},1032,["subtitle"]))),128))],64)}}},be=j(fe,[["__scopeId","data-v-dc86d672"]]),pe={class:"page-container"},ye={class:"row justify-center"},ge={key:0},ve={key:1},he={__name:"TimelinePage",setup(e){const n=te(),{f_Ascents:m,f_PopulatedTrips:f}=M(n),u=Y("timeline");return(c,i)=>(r(),s("div",pe,[o(z,null,{default:d(()=>[o(U,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value=a),class:"text-blue-7",align:"justify"},{default:d(()=>[o(V,{name:"timeline",icon:"book",label:"Tagebuch"}),o(V,{name:"table",icon:"table_chart",label:"Tabelle"})]),_:1},8,["modelValue"]),o(F),o(I,{modelValue:u.value,"onUpdate:modelValue":i[1]||(i[1]=a=>u.value=a),animated:""},{default:d(()=>[o(R,{name:"timeline"},{default:d(()=>[i[3]||(i[3]=v("div",{class:"space"},null,-1)),v("div",ye,[v("div",null,[o(Z,null,{default:d(()=>[o(ae,{color:"secondary",layout:"dense",side:"right",class:"col-10"},{default:d(()=>[Q(f).length===0?(r(),s("div",ge,i[2]||(i[2]=[v("div",{class:"text-h6"},"Keine EintrÃ¤ge gefunden",-1)]))):(r(),s("div",ve,[(r(!0),s(g,null,S(Q(f).toReversed(),a=>(r(),q(be,{key:a.days[0].date,trip:a},null,8,["trip"]))),128))]))]),_:1})]),_:1})])])]),_:1,__:[3]}),o(R,{name:"table"},{default:d(()=>[o(se,{ascents:Q(m),columns:["date","route","summit","grade","stars","unsecure","ascentType","climbers","isAborted","notes"]},null,8,["ascents"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]))}},Ie=j(he,[["__scopeId","data-v-06f28066"]]);export{Ie as default};
